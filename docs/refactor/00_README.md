# gcli2api 网关重构专案

**创建日期**: 2026-01-18
**负责人**: 浮浮酱 (Claude Opus 4.5)
**状态**: ✅ 文档完成，待执行

---

## 专案概述

本专案旨在将 gcli2api 项目中的自研网关功能进行解耦重构，使其成为可插拔的独立模块，便于维护和扩展。

## 文档索引

| 文档 | 说明 | 状态 |
|------|------|------|
| [01_网关解耦分析报告.md](./01_网关解耦分析报告.md) | 网关模块耦合度分析、拆分方案、难度评估 | ✅ 完成 |
| [02_官方仓库分叉对比报告.md](./02_官方仓库分叉对比报告.md) | gcli2api vs gcli2api_official 差异分析 | ✅ 完成 |
| [03_重构实施计划.md](./03_重构实施计划.md) | Phase/Loop 详细实施步骤 | ✅ 完成 |

## 重构目标

### 短期目标 (Phase 1)
- 拆分 `unified_gateway_router.py` (3701 行) 为多个小模块
- 降低单文件复杂度，提高可维护性

### 中期目标 (Phase 2)
- 定义可插拔的 `GatewayBackend` 接口
- 实现后端注册中心
- 配置外部化

### 长期目标 (Phase 3)
- 所有自研功能可独立部署
- IDE 兼容层、Augment 兼容层、签名缓存系统完全解耦

## 预计工作量

| 阶段 | 人工估算 | AI 辅助估算 | Loop 数 |
|------|---------|------------|---------|
| Phase 1 | 8 天 | 3-4 个 loop | 4 |
| Phase 2 | 7 天 | 2-3 个 loop | 3 |
| Phase 3 | 20 天 | 5-6 个 loop | 6 |
| **总计** | **35 天** | **10-13 个 loop** | **13** |

## 风险提示

⚠️ **高风险操作**:
- 流式响应处理修改可能导致输出中断
- Bugment 状态管理变更可能导致工具循环失败
- 签名缓存变更可能导致 IDE 客户端 400 错误

## 更新日志

| 日期 | 更新内容 | 作者 |
|------|---------|------|
| 2026-01-18 | 创建专案文档 | 浮浮酱 |

---

**下一步**: 阅读 [01_网关解耦分析报告.md](./01_网关解耦分析报告.md) 了解详细分析
